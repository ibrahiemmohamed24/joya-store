<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø§Ù„Ø³Ù„Ø© - Joya</title>
<link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    direction: rtl;
    background-image: url('images/background.jpg');
    background-size: cover;
    background-repeat: no-repeat;
    background-position: center;
    background-attachment: fixed;
    padding: 30px;
}

h1 {
    font-family: 'Pacifico', cursive;
    color: #ff69b4;
    text-align: center;
    font-size: 48px;
    text-shadow: -1px -1px 0 #fff, 1px -1px 0 #fff, -1px 1px 0 #fff, 1px 1px 0 #fff;
}

.cart-container {
    max-width: 1000px;
    margin: 0 auto;
    background: rgba(255, 255, 255, 0.95);
    border-radius: 15px;
    padding: 30px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}

.cart-item {
    display: flex;
    align-items: center;
    border: 2px solid #ffb6c1;
    border-radius: 10px;
    padding: 20px;
    margin-bottom: 20px;
    background: white;
    gap: 20px;
}

.cart-item img {
    width: 100px;
    height: 100px;
    border-radius: 10px;
    object-fit: cover;
}

.item-details {
    flex: 1;
    text-align: right;
}

.item-details h3 {
    margin: 0 0 10px 0;
    color: #333;
    font-size: 20px;
}

.item-details p {
    margin: 5px 0;
    color: #666;
    font-size: 16px;
}

.item-details .color-display {
    display: inline-block;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    border: 2px solid #ddd;
    vertical-align: middle;
    margin-left: 5px;
}

.quantity-controls {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-top: 10px;
}

.qty-btn {
    background: #ff69b4;
    border: none;
    color: white;
    padding: 5px 12px;
    font-size: 18px;
    cursor: pointer;
    border-radius: 5px;
    transition: background 0.2s;
}

.qty-btn:hover {
    background: #ff8fb1;
}

.qty-display {
    font-size: 18px;
    font-weight: bold;
    min-width: 30px;
    text-align: center;
}

.item-actions {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.btn {
    padding: 10px 20px;
    border: none;
    border-radius: 25px;
    font-size: 14px;
    cursor: pointer;
    transition: all 0.2s;
    white-space: nowrap;
}

.btn-buy {
    background: #28a745;
    color: white;
}

.btn-buy:hover {
    background: #218838;
    transform: scale(1.05);
}

.btn-remove {
    background: #dc3545;
    color: white;
}

.btn-remove:hover {
    background: #c82333;
    transform: scale(1.05);
}

.empty-cart {
    text-align: center;
    padding: 50px;
    color: #999;
    font-size: 18px;
}

.cart-summary {
    margin-top: 30px;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 10px;
    text-align: center;
}

.cart-summary h2 {
    color: #333;
    margin: 0 0 15px 0;
}

.total-items {
    font-size: 24px;
    color: #ff69b4;
    font-weight: bold;
    margin-bottom: 20px;
}

.action-buttons {
    display: flex;
    justify-content: center;
    gap: 15px;
    flex-wrap: wrap;
}

.btn-large {
    padding: 15px 40px;
    font-size: 18px;
}

.btn-continue {
    background: #ff69b4;
    color: white;
}

.btn-continue:hover {
    background: #ff8fb1;
    transform: scale(1.05);
}

.btn-checkout {
    background: #28a745;
    color: white;
}

.btn-checkout:hover {
    background: #218838;
    transform: scale(1.05);
}

.btn-checkout:hover {
    background: #218838;
    transform: scale(1.05);
}

/* ÙÙˆØ±Ù… Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„ */
.customer-form-section {
    margin-top: 40px;
    padding: 30px;
    background: rgba(255, 255, 255, 0.95);
    border-radius: 15px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
}

.customer-form-section h2 {
    color: #ff69b4;
    text-align: center;
    margin-bottom: 25px;
    font-size: 28px;
}

.form-group {
    margin-bottom: 20px;
    text-align: right;
}

.form-group label {
    display: block;
    margin-bottom: 8px;
    color: #333;
    font-weight: bold;
    font-size: 16px;
}

.form-group .required {
    color: #dc3545;
}

.form-group input,
.form-group textarea {
    width: 100%;
    padding: 12px 15px;
    border: 2px solid #ddd;
    border-radius: 8px;
    font-size: 16px;
    font-family: Arial, sans-serif;
    transition: border-color 0.3s;
    box-sizing: border-box;
}

.form-group input:focus,
.form-group textarea:focus {
    outline: none;
    border-color: #ff69b4;
    box-shadow: 0 0 5px rgba(255, 105, 180, 0.3);
}

.form-group textarea {
    resize: vertical;
    min-height: 80px;
}

.btn-submit {
    width: 100%;
    background: #28a745;
    color: white;
    padding: 15px;
    font-size: 20px;
    margin-top: 10px;
}

.btn-submit:hover {
    background: #218838;
    transform: scale(1.02);
}

@media (max-width: 768px) {
    .cart-item {
        flex-direction: column;
        text-align: center;
    }
    
    .item-details {
        text-align: center;
    }
    
    .item-actions {
        flex-direction: row;
        width: 100%;
    }
}
</style>
</head>
<body>

<h1>Ø³Ù„Ø© Ø§Ù„ØªØ³ÙˆÙ‚ - Joya</h1>

<div class="cart-container">
    <div id="cart-items">
        <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¤Ù‡Ø§ Ø¨Ø§Ù„Ù€ JavaScript -->
    </div>
    
    <div class="cart-summary">
        <h2>Ù…Ù„Ø®Øµ Ø§Ù„Ø³Ù„Ø©</h2>
        <div class="total-items" id="total-items">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù†Ø§ØµØ±: 0</div>
        
        <div class="action-buttons">
            <button class="btn btn-large btn-continue" onclick="continueShopping()">
                Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„ØªØ³ÙˆÙ‚ ğŸ›ï¸
            </button>
        </div>
    </div>
    
    <!-- ÙÙˆØ±Ù… Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„ -->
    <div class="customer-form-section">
        <h2>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„</h2>
        <form id="customer-form" onsubmit="submitOrder(event)">
            <div class="form-group">
                <label for="customer-name">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ <span class="required">*</span></label>
                <input type="text" id="customer-name" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„" required>
            </div>
            
            <div class="form-group">
                <label for="customer-phone">Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ <span class="required">*</span></label>
                <input type="tel" id="customer-phone" placeholder="01xxxxxxxxx" required>
            </div>
            
            <div class="form-group">
                <label for="customer-address">Ø§Ù„Ø¹Ù†ÙˆØ§Ù† <span class="required">*</span></label>
                <textarea id="customer-address" rows="3" placeholder="Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© - Ø§Ù„Ù…Ù†Ø·Ù‚Ø© - Ø§Ù„Ø´Ø§Ø±Ø¹ - Ø±Ù‚Ù… Ø§Ù„Ù…Ø¨Ù†Ù‰" required></textarea>
            </div>
            
            <div class="form-group">
                <label for="customer-notes">Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
                <textarea id="customer-notes" rows="2" placeholder="Ø£ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø£Ùˆ Ø·Ù„Ø¨Ø§Øª Ø®Ø§ØµØ©"></textarea>
            </div>
            
            <button type="submit" class="btn btn-large btn-submit">
                Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨ ğŸ‰
            </button>
        </form>
    </div>
</div>

<script>
// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ù„Ø©
function loadCart() {
    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    const container = document.getElementById('cart-items');
    
    if (cart.length === 0) {
        container.innerHTML = '<div class="empty-cart">Ø³Ù„ØªÙƒ ÙØ§Ø±ØºØ©! ğŸ›’<br>Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ³ÙˆÙ‚ Ø§Ù„Ø¢Ù†</div>';
        document.getElementById('total-items').textContent = 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù†Ø§ØµØ±: 0';
        return;
    }
    
    container.innerHTML = '';
    
    cart.forEach((item, index) => {
        const itemDiv = document.createElement('div');
        itemDiv.className = 'cart-item';
        itemDiv.innerHTML = `
            <img src="${item.img}" alt="${item.name}">
            
            <div class="item-details">
                <h3>${item.name}</h3>
                <p>Ø§Ù„Ù„ÙˆÙ†: ${item.color} <span class="color-display" style="background: ${getColorCode(item.color)}"></span></p>
                
                <div class="quantity-controls">
                    <button class="qty-btn" onclick="decreaseQty(${index})">-</button>
                    <span class="qty-display">${item.quantity}</span>
                    <button class="qty-btn" onclick="increaseQty(${index})">+</button>
                </div>
            </div>
            
            <div class="item-actions">
                <button class="btn btn-buy" onclick="buyNowFromCart(${index})">
                    Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¢Ù† ğŸ’³
                </button>
                <button class="btn btn-remove" onclick="removeItem(${index})">
                    Ø­Ø°Ù ğŸ—‘ï¸
                </button>
            </div>
        `;
        container.appendChild(itemDiv);
    });
    
    updateTotal();
}

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ
function updateTotal() {
    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    const total = cart.reduce((sum, item) => sum + item.quantity, 0);
    document.getElementById('total-items').textContent = `Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù†Ø§ØµØ±: ${total}`;
}

// Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ÙƒÙ…ÙŠØ©
function increaseQty(index) {
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    cart[index].quantity += 1;
    localStorage.setItem('cart', JSON.stringify(cart));
    loadCart();
}

// ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„ÙƒÙ…ÙŠØ©
function decreaseQty(index) {
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    if (cart[index].quantity > 1) {
        cart[index].quantity -= 1;
        localStorage.setItem('cart', JSON.stringify(cart));
        loadCart();
    }
}

// Ø­Ø°Ù Ø¹Ù†ØµØ±
function removeItem(index) {
    if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù†ØµØ± Ù…Ù† Ø§Ù„Ø³Ù„Ø©ØŸ')) {
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        cart.splice(index, 1);
        localStorage.setItem('cart', JSON.stringify(cart));
        loadCart();
    }
}

// Ø´Ø±Ø§Ø¡ Ø§Ù„Ø¢Ù† Ù…Ù† Ø§Ù„Ø³Ù„Ø©
function buyNowFromCart(index) {
    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    const item = cart[index];
    
    // ÙŠÙ…ÙƒÙ†Ùƒ Ù‡Ù†Ø§ Ø¥Ø¶Ø§ÙØ© ØµÙØ­Ø© Ø¯ÙØ¹ Ù…Ù†ÙØµÙ„Ø© Ø£Ùˆ Ø¹Ø±Ø¶ ÙÙˆØ±Ù…
    alert(`Ø¬Ø§Ø±ÙŠ ØªØ¬Ù‡ÙŠØ² Ø·Ù„Ø¨Ùƒ:\n${item.name}\nØ§Ù„Ù„ÙˆÙ†: ${item.color}\nØ§Ù„ÙƒÙ…ÙŠØ©: ${item.quantity}`);
    
    // Ø£Ùˆ ØªÙˆØ¬ÙŠÙ‡ Ù„ØµÙØ­Ø© Ø¯ÙØ¹
    // window.location.href = 'payment.html?item=' + index;
}

// Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„ØªØ³ÙˆÙ‚
function continueShopping() {
    window.location.href = 'index.html';
}

// Ø±Ø§Ø¨Ø· Google Sheets Web App
const GOOGLE_SHEET_URL = 'https://script.google.com/macros/s/AKfycbytyuNNcpygKdIrp8SdHh3V4S-0MG5D2IGDXJSRFz2Ca2yimneGVEoUfGGl85-jbm01fQ/exec';

// Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø·Ù„Ø¨ Ù…Ù† Ø§Ù„ÙÙˆØ±Ù…
function submitOrder(event) {
    event.preventDefault();
    
    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    
    if (cart.length === 0) {
        alert('âŒ Ø³Ù„ØªÙƒ ÙØ§Ø±ØºØ©! Ø£Ø¶Ù Ù…Ù†ØªØ¬Ø§Øª Ø£ÙˆÙ„Ø§Ù‹');
        return;
    }
    
    // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„Ø­Ù‚ÙˆÙ„
    const name = document.getElementById('customer-name').value.trim();
    const phone = document.getElementById('customer-phone').value.trim();
    const address = document.getElementById('customer-address').value.trim();
    const notes = document.getElementById('customer-notes').value.trim();
    
    // ØªØ­Ø¶ÙŠØ± ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
    let orderDetails = '';
    cart.forEach((item, index) => {
        orderDetails += `${index + 1}. ${item.name} - Ø§Ù„Ù„ÙˆÙ†: ${item.color} - Ø§Ù„ÙƒÙ…ÙŠØ©: ${item.quantity}\n`;
    });
    
    const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
    
    // ØªØ­Ø¶ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø¥Ø±Ø³Ø§Ù„
    const orderData = {
        customerName: name,
        customerPhone: phone,
        customerAddress: address,
        customerNotes: notes,
        totalItems: totalItems,
        orderDetails: orderDetails.trim()
    };
    
    // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù†ØªØ¸Ø§Ø±
    const submitBtn = event.target.querySelector('button[type="submit"]');
    const originalBtnText = submitBtn.textContent;
    submitBtn.textContent = 'â³ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...';
    submitBtn.disabled = true;
    
    // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ Google Sheets
    fetch(GOOGLE_SHEET_URL, {
        method: 'POST',
        mode: 'no-cors',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(orderData)
    })
    .then(() => {
        // Ù†Ø¬Ø­ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
        alert(`âœ… ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­ ÙŠØ§ ${name}!\n\nğŸ“± Ø³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹ Ø¹Ù„Ù‰:\n${phone}\n\nğŸ‰ Ø´ÙƒØ±Ø§Ù‹ Ù„Ø«Ù‚ØªÙƒ ÙÙŠ Joya`);
        
        // Ù…Ø³Ø­ Ø§Ù„Ø³Ù„Ø© ÙˆØ§Ù„ÙÙˆØ±Ù…
        localStorage.removeItem('cart');
        document.getElementById('customer-form').reset();
        loadCart();
        
        // Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø²Ø±
        submitBtn.textContent = originalBtnText;
        submitBtn.disabled = false;
    })
    .catch(error => {
        // ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
        console.error('Error:', error);
        alert(`âœ… ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨Ùƒ ÙŠØ§ ${name}!\n\nØ³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹.\n\n(Ù…Ù„Ø§Ø­Ø¸Ø©: ØªÙ… Ø§Ù„Ø­ÙØ¸ Ù…Ø­Ù„ÙŠØ§Ù‹)`);
        
        // Ù…Ø³Ø­ Ø§Ù„Ø³Ù„Ø© ÙˆØ§Ù„ÙÙˆØ±Ù… Ø­ØªÙ‰ Ù„Ùˆ ÙØ´Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
        localStorage.removeItem('cart');
        document.getElementById('customer-form').reset();
        loadCart();
        
        // Ø¥Ø¹Ø§Ø¯Ø© ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø²Ø±
        submitBtn.textContent = originalBtnText;
        submitBtn.disabled = false;
    });
}

// Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ÙƒÙˆØ¯ Ø§Ù„Ù„ÙˆÙ†
function getColorCode(colorName) {
    const colors = {
        'Ø§Ø³ÙˆØ¯': 'black',
        'Ø¨ÙŠØ¬': 'beige',
        'ÙˆØ±Ø¯ÙŠ': 'rgb(246, 148, 164)',
        'Ù†Ø¨ÙŠØªÙŠ': 'rgb(124, 31, 47)',
        'Ø¨Ø±Ø¬Ø§Ù†Ø¯ÙŠ': 'rgb(58, 6, 15)',
        'Ø·ÙˆØ¨ÙŠ': 'rgb(90, 2, 18)',
        'Ø§Ø®Ø¶Ø± Ø¯Ø§ÙƒÙ†': 'rgb(12, 96, 26)',
        'Ø§Ø®Ø¶Ø± Ø¯Ø§ÙƒÙ† 2': 'rgb(10, 57, 10)'
    };
    return colors[colorName] || '#ccc';
}

// ØªØ­Ù…ÙŠÙ„ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
loadCart();
</script>

</body>
</html>
